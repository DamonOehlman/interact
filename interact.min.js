COG=typeof COG!=="undefined"?COG:{};COG.extend=function(){for(var x=arguments[0]||{},G,j=1,t=arguments.length;j<t;j++)if((G=arguments[j])!==null)for(var r in G){var h=G[r];if(x!==h)if(h!==undefined)x[r]=h}return x};
(function(){function x(j,t){var r=j.obsHandlers;r[t]||(r[t]=[]);return r[t]}var G=0;COG.observable=function(j){if(!j)return null;if(!j.obsHandlers)j.obsHandlers={};if(!(j.bind||j.trigger||j.unbind)){j.bind=function(t,r){var h="callback"+G++;x(j,t).unshift({fn:r,id:h});return h};j.triggerCustom=function(t,r){var h=x(j,t),s={cancel:false,name:t},l;r&&COG.extend(s,r);if(!h)return null;l=Array.prototype.slice.call(arguments,2);j.eventInterceptor&&j.eventInterceptor(t,s,l);l.unshift(s);for(var w=h.length;w--&&
!s.cancel;)h[w].fn.apply(this,l);return s};j.trigger=function(t){var r=Array.prototype.slice.call(arguments,1);r.splice(0,0,t,null);return j.triggerCustom.apply(this,r)};j.unbind=function(t,r){if(typeof t==="undefined")j.obsHandlers={};else for(var h=x(j,t),s=0;h&&s<h.length;s++)if(h[s].id===r){h.splice(s,1);break}return j}}return j}})();
var FNS_TIME=["webkitAnimationTime","mozAnimationTime","animationTime","webkitAnimationStartTime","mozAnimationStartTime","animationStartTime"],FNS_FRAME=["webkitRequestAnimationFrame","mozRequestAnimationFrame","requestAnimationFrame"],animTime=function(){return(new Date).getTime()},animFrame=function(x){setTimeout(function(){x(animTime())},1E3/60)};FNS_TIME.forEach(function(x){if(x in window)animTime=function(){return window[x]}});FNS_FRAME.forEach(function(x){if(x in window)animFrame=function(G){window[x](G)}});
COG.animTime=animTime;COG.animFrame=animFrame;
COG.Loopage=function(){function x(l){return COG.extend({id:r++,frequency:0,after:0,single:false,lastTick:0,execute:function(){}},l)}function G(l){s.push(l);t||(t=animFrame(j));recalcSleepFrequency=true}function j(){for(var l,w=animTime(),y=h.length;s.length>0;){var I=s.shift();for(l=y;l--;)if(h[l].id===I){h.splice(l,1);break}y=h.length}for(l=y;l--;){I=w-h[l].lastTick;if(h[l].lastTick===0||I>=h[l].frequency){h[l].execute(w,h[l]);h[l].lastTick=w;h[l].single&&h[l].trigger("complete")}}t=y?animFrame(j):
0}var t=0,r=0,h=[],s=[];return{join:function(l){var w=new x(l);if(w.after>0)w.lastTick=(new Date).getTime()+w.after;COG.observable(w);w.bind("complete",function(){G(w.id)});h.unshift(w);t||(t=animFrame(j));recalcSleepFrequency=true;return w},leave:G}}();
(function(){function x(a){if(K)return y.length;K=true;try{for(var c=0;c<y.length;)if(y[c].isComplete()){y[c].triggerComplete(false);y.splice(c,1)}else{y[c].update(a);c++}}finally{K=false}y.length===0&&I.trigger("complete");return y.length}function G(){if(!I){I=COG.Loopage.join({execute:x,frequency:20});I.bind("complete",function(){I=null})}}var j=1.70158,t=Math.PI/2,r=Math.abs,h=Math.pow,s=Math.sin,l=Math.asin,w=Math.cos,y=[],I=null,K=false,O={linear:function(a,c,b,e){return b*a/e+c},backin:function(a,
c,b,e){return b*(a/=e)*a*((j+1)*a-j)+c},backout:function(a,c,b,e){return b*((a=a/e-1)*a*((j+1)*a+j)+1)+c},backinout:function(a,c,b,e){return(a/=e/2)<1?b/2*a*a*(((j*=1.525)+1)*a-j)+c:b/2*((a-=2)*a*(((j*=1.525)+1)*a+j)+2)+c},bouncein:function(a,c,b,e){return b-O.bounceout(e-a,0,b,e)+c},bounceout:function(a,c,b,e){return(a/=e)<1/2.75?b*7.5625*a*a+c:a<2/2.75?b*(7.5625*(a-=1.5/2.75)*a+0.75)+c:a<2.5/2.75?b*(7.5625*(a-=2.25/2.75)*a+0.9375)+c:b*(7.5625*(a-=2.625/2.75)*a+0.984375)+c},bounceinout:function(a,
c,b,e){return a<e/2?O.bouncein(a*2,0,b,e)/2+c:O.bounceout(a*2-e,0,b,e)/2+b/2+c},cubicin:function(a,c,b,e){return b*(a/=e)*a*a+c},cubicout:function(a,c,b,e){return b*((a=a/e-1)*a*a+1)+c},cubicinout:function(a,c,b,e){if((a/=e/2)<1)return b/2*a*a*a+c;return b/2*((a-=2)*a*a+2)+c},elasticin:function(a,c,b,e,i,m){if(a==0)return c;if((a/=e)==1)return c+b;m||(m=e*0.3);if(!i||i<r(b)){i=b;b=m/4}else b=m/TWO_PI*l(b/i);return-(i*h(2,10*(a-=1))*s((a*e-b)*TWO_PI/m))+c},elasticout:function(a,c,b,e,i,m){var n;if(a==
0)return c;if((a/=e)==1)return c+b;m||(m=e*0.3);if(!i||i<r(b)){i=b;n=m/4}else n=m/TWO_PI*l(b/i);return i*h(2,-10*a)*s((a*e-n)*TWO_PI/m)+b+c},elasticinout:function(a,c,b,e,i,m){var n;if(a==0)return c;if((a/=e/2)==2)return c+b;m||(m=e*0.3*1.5);if(!i||i<r(b)){i=b;n=m/4}else n=m/TWO_PI*l(b/i);if(a<1)return-0.5*i*h(2,10*(a-=1))*s((a*e-n)*TWO_PI/m)+c;return i*h(2,-10*(a-=1))*s((a*e-n)*TWO_PI/m)*0.5+b+c},quadin:function(a,c,b,e){return b*(a/=e)*a+c},quadout:function(a,c,b,e){return-b*(a/=e)*(a-2)+c},quadinout:function(a,
c,b,e){if((a/=e/2)<1)return b/2*a*a+c;return-b/2*(--a*(a-2)-1)+c},sinein:function(a,c,b,e){return-b*w(a/e*t)+b+c},sineout:function(a,c,b,e){return b*s(a/e*t)+c},sineinout:function(a,c,b,e){return-b/2*(w(Math.PI*a/e)-1)+c}},g=COG.Tween=function(a){a=COG.extend({target:null,property:null,startValue:0,endValue:null,duration:2E3,tweenFn:f("sine.out"),complete:null},a);var c=(new Date).getTime(),b=[],e=false,i=0,m=0;i=a.target&&a.property&&a.target[a.property]?a.target[a.property]:a.startValue;if(typeof a.endValue!==
"undefined")m=a.endValue-i;if(m==0)e=true;G();return{isComplete:function(){return e},triggerComplete:function(n){a.complete&&a.complete(n)},update:function(n){var D=a.tweenFn(n-c,i,m,a.duration);if(a.target)a.target[a.property]=D;for(var B=b.length;B--;)b[B](D,void 0);if(e=c+a.duration<=n){if(a.target)a.target[a.property]=a.tweenFn(a.duration,i,m,a.duration);for(n=b.length;n--;)b[n](D,true)}},requestUpdates:function(n){b.push(n)}}};COG.tweenValue=function(a,c,b,e,i){function m(B){var H=B-n,p=b(H,
a,D,e),E=n+e<=B;B=!E;if(i){H=i(p,E,H);B=typeof H!="undefined"?H&&B:B}B&&animFrame(m)}var n=animTime(),D=c-a;animFrame(m);return{}};COG.tween=function(a,c,b,e,i,m){a=new g({target:a,property:c,endValue:b,tweenFn:e,duration:m,complete:i});y.push(a);return a};COG.endTweens=function(a){if(!K){K=true;try{for(var c=0;c<y.length;)if(!a||a(y[c])){y[c].triggerComplete(true);y.splice(c,1)}else c++}finally{K=false}}};COG.getTweens=function(){return[].concat(y)};var f=COG.easing=function(a){return O[a.replace(/[\-\_\s\.]/g,
"").toLowerCase()]};COG.registerEasingType=function(a,c){O[a.replace(/[\-\_\s\.]/g,"").toLowerCase()]=c}})();
(function(){function x(h){return typeof console!=="undefined"?function(){console[h](Array.prototype.slice.call(arguments,0).join(" "));return true}:function(){return false}}var G=window.console&&window.console.markTimeline,j=x("error"),t=x("info"),r=function(){return G?function(h,s){console.markTimeline(h+(s?": "+((new Date).getTime()-s)+"ms":""))}:function(){}}();COG.extend(COG,{trace:r,debug:x("debug"),info:t,warn:x("warn"),error:j,exception:function(h){if(j)for(var s in h)t("ERROR DETAIL: "+s+
": "+h[s])}})})();
INTERACT=function(){function x(g){return function(f,a,c){(c?c:g?document.body:document).addEventListener(f,a,false)}}function G(g){return function(f,a,c){(c?c:g?document.body:document).removeEventListener(f,a,false)}}function j(g,f,a){(a?a:document).attachEvent("on"+g,f)}function t(g,f,a){(a?a:document).detachEvent("on"+g,f)}function r(g,f){return{x:g?g:0,y:f?f:0,count:1}}function h(g,f){K.push(COG.extend({handler:null,checks:{},type:g},f))}function s(g){var f=0,a=0;if(g.offsetParent){do{f+=g.offsetLeft;
a+=g.offsetTop;g=g.offsetParent}while(g)}return{x:f,y:a}}function l(g,f){return{source:g,target:f.target?f.target:f.srcElement}}function w(g,f){for(var a=g.target?g.target:g.srcElement;a&&a!==f&&a.nodeName&&a.nodeName.toUpperCase()!="CANVAS";)a=a.parentNode;return a&&a===f}function y(g,f){return{x:g.x-(f?f.x:0),y:g.y-(f?f.y:0)}}function I(g){if(g.preventDefault){g.preventDefault();g.stopPropagation()}else g.cancelBubble&&g.cancelBubble()}var K=[],O=function(g,f,a){function c(p,E,F,o){var A=0,C=0,
d=0;COG.tweenValue(0,p,F,o,function(z){d=A;A=z});COG.tweenValue(0,E,F,o,function(z){b.trigger("pan",A-d,z-C);C=z})}a=COG.extend({binder:null,unbinder:null,observable:null},a);for(var b=a.observable,e=null,i=[],m=[],n,D,B={bind:function(){return b.bind.apply(null,arguments)},pannable:function(p){e=COG.extend({inertia:true},p);return B},unbind:function(){b.unbind();for(var p=0;p<i.length;p++)i[p].unbind();return B}},H=0;H<f.length;H++)i.push(f[H](g,b,a));b.bind("pointerDown",function(){m=[];D=n=0});
b.bind("pointerMove",function(p,E,F,o){if(e){m[m.length]={ticks:(new Date).getTime(),x:o.x,y:o.y};b.trigger("pan",o.x,o.y)}n+=o.x?o.x:0;D+=o.y?o.y:0});b.bind("pointerUp",function(p,E,F){if(Math.abs(n)>20||Math.abs(D)>20){if(e){p=m;E=p.length;var o;var A=F=0,C,d,z;o=E>0?(new Date).getTime()-p[E-1].ticks:0;var u;for(u=p.length;--u>=1&&o<50;)o+=p[u].ticks-p[u-1].ticks;o=E-u;if(o>1){for(;u<E;u++){C=p[u].x-p[u-1].x;d=p[u].y-p[u-1].y;z=p[u].ticks-p[u-1].ticks;F+=C/z;A+=d/z}F=Math.min(F/o*500|0,300);A=Math.min(A/
o*500|0,300);c(F,A,COG.easing("quad.out"),500)}}}else b.trigger("tap",E,F)});return B};h("pointer",{handler:function(g,f,a){function c(d){if(w(d,g))if(H=m(d)){g.style.cursor="move";I(d);A=d.pageX?d.pageX:d.screenX;C=d.pageY?d.pageY:d.screenY;p=r(A,C);E=s(g);f.triggerCustom("pointerDown",l("mouse",d),p,y(p,E))}}function b(d){F=d.pageX?d.pageX:d.screenX;o=d.pageY?d.pageY:d.screenY;if(w(d,g))n(d,H?"pointerMove":"pointerHover")}function e(d){if(H&&m(d)){H=false;if(w(d,g)){g.style.cursor="default";n(d,
"pointerUp")}}}function i(d){if(w(d,g)){var z;d=d||window.event;if(d.detail)z=d.axis===2?-d.detail*D:0;else{z=d.wheelDeltaY?d.wheelDeltaY:d.wheelDelta;if(window.opera)z=-z}if(z!==0){var u=r(F,o);f.triggerCustom("zoom",l("mouse",d),u,y(u,s(g)),z/B,"wheel");I(d);d.returnValue=false}}}function m(d){d=d||window.event;return(d.which||d.button)==1}function n(d,z,u,L,P){u=typeof u!="undefined"?u:F;L=typeof L!="undefined"?L:o;var k=u-A,v=L-C,q=r(u,L);f.triggerCustom(z,l("mouse",d),q,y(q,E),r(k,v));if(typeof P==
"undefined"||P){A=u;C=L}}a=COG.extend({},a);var D=120,B=D*8,H=false,p,E,F,o,A,C;a.binder("mousedown",c,false);a.binder("mousemove",b,false);a.binder("mouseup",e,false);a.binder("dblclick",function(d){COG.info("captured double click");if(w(d,g)){var z=r(d.pageX?d.pageX:d.screenX,d.pageY?d.pageY:d.screenY);COG.info("captured double click + target matched");f.triggerCustom("doubleTap",l("mouse",d),z,y(z,s(g)))}},false);a.binder("mousewheel",i,document);a.binder("DOMMouseScroll",i,document);return{unbind:function(){a.unbinder("mousedown",
c,false);a.unbinder("mousemove",b,false);a.unbinder("mouseup",e,false);a.unbinder("mousewheel",i,document);a.unbinder("DOMMouseScroll",i,document)}}},checks:{touch:false}});h("pointer",{handler:function(g,f,a){function c(k){if(k.count<2)return 0;var v=k.x-k.next.x;k=k.y-k.next.y;return~~Math.sqrt(v*v+k*k)}function b(k,v,q){v=v?v:0;q=q?q:0;for(var J={x:k.x-v,y:k.y-q,id:k.id,count:k.count},M=J;k.next;){k=k.next;M=M.next={x:k.x-v,y:k.y-q,id:k.id}}return J}function e(k,v){var q=k[v?v:"touches"],J,M;if(q.length===
0)return null;M=J={x:q[0].pageX,y:q[0].pageY,id:q[0].identifier,count:q.length};for(var N=1,Q=q.length;N<Q;N++)M=M.next={x:q[N].pageX,y:q[N].pageY,id:q[N].identifier};return J}function i(k){if(w(k,g)){o=s(g);var v=e(k,"changedTouches"),q=b(v,o.x,o.y);if(!C){A=p;f.triggerCustom("pointerDown",l("touch",k),v,q)}L&&f.triggerCustom("pointerDownMulti",l("touch",k),v,q);C=e(k);if(C.count>1)z=c(C);P=1;u=b(C)}}function m(k){if(w(k,g)){k.preventDefault();d=e(k);if(A==p)A=Math.abs(C.x-d.x)>B||Math.abs(C.y-d.y)>
B?H:p;if(A!=p){A=d.count>1?F:E;if(A==F)if(C.count===1){C=b(d);z=c(C)}else{var v=c(d);if(Math.abs(z-v)<D)A=E;else{var q;q=d.x;var J=d.next.x,M=d.y,N=d.next.y;q={x:(q<J?q:J)+(Math.abs(q-J)>>1),y:(M<N?M:N)+(Math.abs(M-N)>>1)};v=v/z;J=v-P;f.triggerCustom("zoom",l("touch",k),q,y(q,o),J,"pinch");P=v}}A==E&&f.triggerCustom("pointerMove",l("touch",k),d,b(d,o.x,o.y),r(d.x-u.x,d.y-u.y));L&&f.triggerCustom("pointerMoveMulti",l("touch",k),d,b(d,o.x,o.y))}u=b(d)}}function n(k){if(w(k,g)){var v=e(k,"changedTouches"),
q=b(v,o.x,o.y);d=e(k);if(!d){A===p&&f.triggerCustom("tap",l("touch",k),v,q);f.triggerCustom("pointerUp",l("touch",k),v,q);C=null}L&&f.triggerCustom("pointerUpMulti",l("touch",k),v,q)}}a=COG.extend({detailed:false,inertia:false},a);var D=20,B=7,H=0,p=1,E=2,F=3,o,A,C,d,z,u,L=a.detailed,P=1;a.binder("touchstart",i,false);a.binder("touchmove",m,false);a.binder("touchend",n,false);COG.info("initialized touch handler");return{unbind:function(){a.unbinder("touchstart",i,false);a.unbinder("touchmove",m,false);
a.unbinder("touchend",n,false)}}},checks:{touch:true}});return{register:h,watch:function(g,f,a){f=COG.extend({bindToBody:false,observable:null,isIE:typeof window.attachEvent!="undefined",types:null},f);capabilities=COG.extend({touch:"ontouchstart"in window},a);if(!f.observable){COG.info("creating observable");f.observable=COG.observable({});globalOpts=f}f.binder=f.isIE?j:x(f.bindToBody);f.unbinder=f.isIE?t:G(f.bindToBody);a=f.types;for(var c=capabilities,b=[],e=K.length;e--;){var i=K[e],m=!a||a.indexOf(i.type)>=
0,n=true,D;for(D in i.checks){var B=i.checks[D];COG.info("checking "+D+" capability. require: "+B+", capability = "+c[D]);n=n&&B===c[D]}if(m&&n)b[b.length]=i.handler}return new O(g,b,f)}}}();
