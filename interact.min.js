COG=typeof COG!=="undefined"?COG:{};COG.extend=function(){for(var v=arguments[0]||{},G,k=1,s=arguments.length;k<s;k++)if((G=arguments[k])!==null)for(var p in G){var i=G[p];if(v!==i)if(i!==undefined)v[p]=i}return v};
(function(){function v(k,s){var p=k.obsHandlers;p[s]||(p[s]=[]);return p[s]}var G=0;COG.observable=function(k){if(!k)return null;if(!k.obsHandlers)k.obsHandlers={};if(!(k.bind||k.trigger||k.unbind)){k.bind=function(s,p){var i="callback"+G++;v(k,s).unshift({fn:p,id:i});return i};k.triggerCustom=function(s,p){var i=v(k,s),q={cancel:false,name:s},m;p&&COG.extend(q,p);if(!i)return null;m=Array.prototype.slice.call(arguments,2);k.eventInterceptor&&k.eventInterceptor(s,q,m);m.unshift(q);for(var u=i.length;u--&&
!q.cancel;)i[u].fn.apply(this,m);return q};k.trigger=function(s){var p=Array.prototype.slice.call(arguments,1);p.splice(0,0,s,null);return k.triggerCustom.apply(this,p)};k.unbind=function(s,p){if(typeof s==="undefined")k.obsHandlers={};else for(var i=v(k,s),q=0;i&&q<i.length;q++)if(i[q].id===p){i.splice(q,1);break}return k}}return k}})();
var FNS_TIME=["webkitAnimationTime","mozAnimationTime","animationTime","webkitAnimationStartTime","mozAnimationStartTime","animationStartTime"],FNS_FRAME=["webkitRequestAnimationFrame","mozRequestAnimationFrame","requestAnimationFrame"],animTime=function(){return(new Date).getTime()},animFrame=function(v){setTimeout(function(){v(animTime())},1E3/60)};FNS_TIME.forEach(function(v){if(v in window)animTime=function(){return window[v]}});FNS_FRAME.forEach(function(v){if(v in window)animFrame=function(G){window[v](G)}});
COG.animTime=animTime;COG.animFrame=animFrame;
COG.Loopage=function(){function v(m){return COG.extend({id:p++,frequency:0,after:0,single:false,lastTick:0,execute:function(){}},m)}function G(m){q.push(m);s||(s=animFrame(k));recalcSleepFrequency=true}function k(){for(var m,u=animTime(),w=i.length;q.length>0;){var I=q.shift();for(m=w;m--;)if(i[m].id===I){i.splice(m,1);break}w=i.length}for(m=w;m--;){I=u-i[m].lastTick;if(i[m].lastTick===0||I>=i[m].frequency){i[m].execute(u,i[m]);i[m].lastTick=u;i[m].single&&i[m].trigger("complete")}}s=w?animFrame(k):
0}var s=0,p=0,i=[],q=[];return{join:function(m){var u=new v(m);if(u.after>0)u.lastTick=(new Date).getTime()+u.after;COG.observable(u);u.bind("complete",function(){G(u.id)});i.unshift(u);s||(s=animFrame(k));recalcSleepFrequency=true;return u},leave:G}}();
(function(){function v(a){if(K)return w.length;K=true;try{for(var c=0;c<w.length;)if(w[c].isComplete()){w[c].triggerComplete(false);w.splice(c,1)}else{w[c].update(a);c++}}finally{K=false}w.length===0&&I.trigger("complete");return w.length}function G(){if(!I){I=COG.Loopage.join({execute:v,frequency:20});I.bind("complete",function(){I=null})}}var k=1.70158,s=Math.PI/2,p=Math.abs,i=Math.pow,q=Math.sin,m=Math.asin,u=Math.cos,w=[],I=null,K=false,O={linear:function(a,c,b,e){return b*a/e+c},backin:function(a,
c,b,e){return b*(a/=e)*a*((k+1)*a-k)+c},backout:function(a,c,b,e){return b*((a=a/e-1)*a*((k+1)*a+k)+1)+c},backinout:function(a,c,b,e){return(a/=e/2)<1?b/2*a*a*(((k*=1.525)+1)*a-k)+c:b/2*((a-=2)*a*(((k*=1.525)+1)*a+k)+2)+c},bouncein:function(a,c,b,e){return b-O.bounceout(e-a,0,b,e)+c},bounceout:function(a,c,b,e){return(a/=e)<1/2.75?b*7.5625*a*a+c:a<2/2.75?b*(7.5625*(a-=1.5/2.75)*a+0.75)+c:a<2.5/2.75?b*(7.5625*(a-=2.25/2.75)*a+0.9375)+c:b*(7.5625*(a-=2.625/2.75)*a+0.984375)+c},bounceinout:function(a,
c,b,e){return a<e/2?O.bouncein(a*2,0,b,e)/2+c:O.bounceout(a*2-e,0,b,e)/2+b/2+c},cubicin:function(a,c,b,e){return b*(a/=e)*a*a+c},cubicout:function(a,c,b,e){return b*((a=a/e-1)*a*a+1)+c},cubicinout:function(a,c,b,e){if((a/=e/2)<1)return b/2*a*a*a+c;return b/2*((a-=2)*a*a+2)+c},elasticin:function(a,c,b,e,j,h){if(a==0)return c;if((a/=e)==1)return c+b;h||(h=e*0.3);if(!j||j<p(b)){j=b;b=h/4}else b=h/TWO_PI*m(b/j);return-(j*i(2,10*(a-=1))*q((a*e-b)*TWO_PI/h))+c},elasticout:function(a,c,b,e,j,h){var n;if(a==
0)return c;if((a/=e)==1)return c+b;h||(h=e*0.3);if(!j||j<p(b)){j=b;n=h/4}else n=h/TWO_PI*m(b/j);return j*i(2,-10*a)*q((a*e-n)*TWO_PI/h)+b+c},elasticinout:function(a,c,b,e,j,h){var n;if(a==0)return c;if((a/=e/2)==2)return c+b;h||(h=e*0.3*1.5);if(!j||j<p(b)){j=b;n=h/4}else n=h/TWO_PI*m(b/j);if(a<1)return-0.5*j*i(2,10*(a-=1))*q((a*e-n)*TWO_PI/h)+c;return j*i(2,-10*(a-=1))*q((a*e-n)*TWO_PI/h)*0.5+b+c},quadin:function(a,c,b,e){return b*(a/=e)*a+c},quadout:function(a,c,b,e){return-b*(a/=e)*(a-2)+c},quadinout:function(a,
c,b,e){if((a/=e/2)<1)return b/2*a*a+c;return-b/2*(--a*(a-2)-1)+c},sinein:function(a,c,b,e){return-b*u(a/e*s)+b+c},sineout:function(a,c,b,e){return b*q(a/e*s)+c},sineinout:function(a,c,b,e){return-b/2*(u(Math.PI*a/e)-1)+c}},g=COG.Tween=function(a){a=COG.extend({target:null,property:null,startValue:0,endValue:null,duration:2E3,tweenFn:f("sine.out"),complete:null},a);var c=(new Date).getTime(),b=[],e=false,j=0,h=0;j=a.target&&a.property&&a.target[a.property]?a.target[a.property]:a.startValue;if(typeof a.endValue!==
"undefined")h=a.endValue-j;if(h==0)e=true;G();return{isComplete:function(){return e},triggerComplete:function(n){a.complete&&a.complete(n)},update:function(n){var D=a.tweenFn(n-c,j,h,a.duration);if(a.target)a.target[a.property]=D;for(var B=b.length;B--;)b[B](D,void 0);if(e=c+a.duration<=n){if(a.target)a.target[a.property]=a.tweenFn(a.duration,j,h,a.duration);for(n=b.length;n--;)b[n](D,true)}},requestUpdates:function(n){b.push(n)}}};COG.tweenValue=function(a,c,b,e,j){function h(B){var H=B-n,x=b(H,
a,D,e),E=n+e<=B;B=!E;if(j){H=j(x,E,H);B=typeof H!="undefined"?H&&B:B}B&&animFrame(h)}var n=animTime(),D=c-a;animFrame(h);return{}};COG.tween=function(a,c,b,e,j,h){a=new g({target:a,property:c,endValue:b,tweenFn:e,duration:h,complete:j});w.push(a);return a};COG.endTweens=function(a){if(!K){K=true;try{for(var c=0;c<w.length;)if(!a||a(w[c])){w[c].triggerComplete(true);w.splice(c,1)}else c++}finally{K=false}}};COG.getTweens=function(){return[].concat(w)};var f=COG.easing=function(a){return O[a.replace(/[\-\_\s\.]/g,
"").toLowerCase()]};COG.registerEasingType=function(a,c){O[a.replace(/[\-\_\s\.]/g,"").toLowerCase()]=c}})();
(function(){function v(i){return typeof console!=="undefined"?function(){console[i](Array.prototype.slice.call(arguments,0).join(" "));return true}:function(){return false}}var G=window.console&&window.console.markTimeline,k=v("error"),s=v("info"),p=function(){return G?function(i,q){console.markTimeline(i+(q?": "+((new Date).getTime()-q)+"ms":""))}:function(){}}();COG.extend(COG,{trace:p,debug:v("debug"),info:s,warn:v("warn"),error:k,exception:function(i){if(k)for(var q in i)s("ERROR DETAIL: "+q+
": "+i[q])}})})();
INTERACT=function(){function v(g){return function(f,a,c){(c?c:g?document.body:document).addEventListener(f,a,false)}}function G(g){return function(f,a,c){(c?c:g?document.body:document).removeEventListener(f,a,false)}}function k(g,f,a){(a?a:document).attachEvent("on"+g,f)}function s(g,f,a){(a?a:document).detachEvent("on"+g,f)}function p(g,f){return{x:g?g:0,y:f?f:0,count:1}}function i(g,f){K.push(COG.extend({handler:null,checks:{},type:g},f))}function q(g){var f=0,a=0;if(g.offsetParent){do{f+=g.offsetLeft;
a+=g.offsetTop;g=g.offsetParent}while(g)}return{x:f,y:a}}function m(g,f){return{source:g,target:f.target?f.target:f.srcElement}}function u(g,f){for(var a=g.target?g.target:g.srcElement;a&&a!==f&&a.nodeName&&a.nodeName.toUpperCase()!="CANVAS";)a=a.parentNode;return a&&a===f}function w(g,f){return{x:g.x-(f?f.x:0),y:g.y-(f?f.y:0)}}function I(g){if(g.preventDefault){g.preventDefault();g.stopPropagation()}else g.cancelBubble&&g.cancelBubble()}var K=[],O=function(g,f,a){function c(x,E,F,r){var y=0,C=0,
d=0;COG.tweenValue(0,x,F,r,function(z){d=y;y=z});COG.tweenValue(0,E,F,r,function(z){b.trigger("pan",y-d,z-C);C=z})}a=COG.extend({binder:null,unbinder:null,observable:null},a);for(var b=a.observable,e=null,j=[],h=[],n,D,B={bind:function(){return b.bind.apply(null,arguments)},pannable:function(x){e=COG.extend({inertia:true},x);return B},unbind:function(){b.unbind();for(var x=0;x<j.length;x++)j[x].unbind();return B}},H=0;H<f.length;H++)j.push(f[H](g,b,a));b.bind("pointerDown",function(){h=[];D=n=0});
b.bind("pointerMove",function(x,E,F,r){if(e){h[h.length]={ticks:(new Date).getTime(),x:r.x,y:r.y};b.trigger("pan",r.x,r.y)}n+=r.x?r.x:0;D+=r.y?r.y:0});b.bind("pointerUp",function(x,E,F){if(Math.abs(n)>20||Math.abs(D)>20){if(e){x=h.length;var r=Math.max(1,x-10);E=x-r;for(var y=F=0,C,d,z=0,A=r;A<x;A++){r=h[A].x-h[A-1].x;C=h[A].y-h[A-1].y;d=h[A].ticks-h[A-1].ticks;z+=d;F+=r/d;y+=C/d}F=Math.min(F/E*500|0,300);y=Math.min(y/E*500|0,300);c(F,y,COG.easing("quad.out"),500)}}else b.trigger("tap",E,F)});return B};
i("pointer",{handler:function(g,f,a){function c(d){if(u(d,g))if(H=h(d)){g.style.cursor="move";I(d);y=d.pageX?d.pageX:d.screenX;C=d.pageY?d.pageY:d.screenY;x=p(y,C);E=q(g);f.triggerCustom("pointerDown",m("mouse",d),x,w(x,E))}}function b(d){F=d.pageX?d.pageX:d.screenX;r=d.pageY?d.pageY:d.screenY;if(u(d,g))n(d,H?"pointerMove":"pointerHover")}function e(d){if(H&&h(d)){H=false;if(u(d,g)){g.style.cursor="default";n(d,"pointerUp")}}}function j(d){if(u(d,g)){var z;d=d||window.event;if(d.detail)z=d.axis===
2?-d.detail*D:0;else{z=d.wheelDeltaY?d.wheelDeltaY:d.wheelDelta;if(window.opera)z=-z}if(z!==0){var A=p(F,r);f.triggerCustom("zoom",m("mouse",d),A,w(A,q(g)),z/B,"wheel");I(d);d.returnValue=false}}}function h(d){d=d||window.event;return(d.which||d.button)==1}function n(d,z,A,L,P){A=typeof A!="undefined"?A:F;L=typeof L!="undefined"?L:r;var l=A-y,t=L-C,o=p(A,L);f.triggerCustom(z,m("mouse",d),o,w(o,E),p(l,t));if(typeof P=="undefined"||P){y=A;C=L}}a=COG.extend({},a);var D=120,B=D*8,H=false,x,E,F,r,y,C;
a.binder("mousedown",c,false);a.binder("mousemove",b,false);a.binder("mouseup",e,false);a.binder("dblclick",function(d){COG.info("captured double click");if(u(d,g)){var z=p(d.pageX?d.pageX:d.screenX,d.pageY?d.pageY:d.screenY);COG.info("captured double click + target matched");f.triggerCustom("doubleTap",m("mouse",d),z,w(z,q(g)))}},false);a.binder("mousewheel",j,document);a.binder("DOMMouseScroll",j,document);return{unbind:function(){a.unbinder("mousedown",c,false);a.unbinder("mousemove",b,false);
a.unbinder("mouseup",e,false);a.unbinder("mousewheel",j,document);a.unbinder("DOMMouseScroll",j,document)}}},checks:{touch:false}});i("pointer",{handler:function(g,f,a){function c(l){if(l.count<2)return 0;var t=l.x-l.next.x;l=l.y-l.next.y;return~~Math.sqrt(t*t+l*l)}function b(l,t,o){t=t?t:0;o=o?o:0;for(var J={x:l.x-t,y:l.y-o,id:l.id,count:l.count},M=J;l.next;){l=l.next;M=M.next={x:l.x-t,y:l.y-o,id:l.id}}return J}function e(l,t){var o=l[t?t:"touches"],J,M;if(o.length===0)return null;M=J={x:o[0].pageX,
y:o[0].pageY,id:o[0].identifier,count:o.length};for(var N=1,Q=o.length;N<Q;N++)M=M.next={x:o[N].pageX,y:o[N].pageY,id:o[N].identifier};return J}function j(l){if(u(l,g)){r=q(g);var t=e(l,"changedTouches"),o=b(t,r.x,r.y);if(!C){y=x;f.triggerCustom("pointerDown",m("touch",l),t,o)}L&&f.triggerCustom("pointerDownMulti",m("touch",l),t,o);C=e(l);if(C.count>1)z=c(C);P=1;A=b(C)}}function h(l){if(u(l,g)){l.preventDefault();d=e(l);if(y==x)y=Math.abs(C.x-d.x)>B||Math.abs(C.y-d.y)>B?H:x;if(y!=x){y=d.count>1?F:
E;if(y==F)if(C.count===1){C=b(d);z=c(C)}else{var t=c(d);if(Math.abs(z-t)<D)y=E;else{var o;o=d.x;var J=d.next.x,M=d.y,N=d.next.y;o={x:(o<J?o:J)+(Math.abs(o-J)>>1),y:(M<N?M:N)+(Math.abs(M-N)>>1)};t=t/z;J=t-P;f.triggerCustom("zoom",m("touch",l),o,w(o,r),J,"pinch");P=t}}y==E&&f.triggerCustom("pointerMove",m("touch",l),d,b(d,r.x,r.y),p(d.x-A.x,d.y-A.y));L&&f.triggerCustom("pointerMoveMulti",m("touch",l),d,b(d,r.x,r.y))}A=b(d)}}function n(l){if(u(l,g)){var t=e(l,"changedTouches"),o=b(t,r.x,r.y);d=e(l);
if(!d){y===x&&f.triggerCustom("tap",m("touch",l),t,o);f.triggerCustom("pointerUp",m("touch",l),t,o);C=null}L&&f.triggerCustom("pointerUpMulti",m("touch",l),t,o)}}a=COG.extend({detailed:false,inertia:false},a);var D=20,B=7,H=0,x=1,E=2,F=3,r,y,C,d,z,A,L=a.detailed,P=1;a.binder("touchstart",j,false);a.binder("touchmove",h,false);a.binder("touchend",n,false);COG.info("initialized touch handler");return{unbind:function(){a.unbinder("touchstart",j,false);a.unbinder("touchmove",h,false);a.unbinder("touchend",
n,false)}}},checks:{touch:true}});return{register:i,watch:function(g,f,a){f=COG.extend({bindToBody:false,observable:null,isIE:typeof window.attachEvent!="undefined",types:null},f);capabilities=COG.extend({touch:"ontouchstart"in window},a);if(!f.observable){COG.info("creating observable");f.observable=COG.observable({});globalOpts=f}f.binder=f.isIE?k:v(f.bindToBody);f.unbinder=f.isIE?s:G(f.bindToBody);a=f.types;for(var c=capabilities,b=[],e=K.length;e--;){var j=K[e],h=!a||a.indexOf(j.type)>=0,n=true,
D;for(D in j.checks){var B=j.checks[D];COG.info("checking "+D+" capability. require: "+B+", capability = "+c[D]);n=n&&B===c[D]}if(h&&n)b[b.length]=j.handler}return new O(g,b,f)}}}();
