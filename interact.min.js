COG=typeof COG!=="undefined"?COG:{};COG.extend=function(){for(var x=arguments[0]||{},I,l=1,w=arguments.length;l<w;l++)if((I=arguments[l])!==null)for(var o in I){var m=I[o];if(x!==m)if(m!==undefined)x[o]=m}return x};
(function(){function x(l,w){var o=l.obsHandlers;o[w]||(o[w]=[]);return o[w]}var I=0;COG.observable=function(l){if(!l)return null;if(!l.obsHandlers)l.obsHandlers={};if(!(l.bind||l.trigger||l.unbind)){l.bind=function(w,o){var m="callback"+I++;x(l,w).unshift({fn:o,id:m});return m};l.triggerCustom=function(w,o){var m=x(l,w),t={cancel:false,name:w,source:this},D;o&&COG.extend(t,o);if(!m)return null;D=Array.prototype.slice.call(arguments,2);l.eventInterceptor&&l.eventInterceptor(w,t,D);D.unshift(t);for(var F=
m.length;F--&&!t.cancel;)m[F].fn.apply(this,D);return t};l.trigger=function(w){var o=Array.prototype.slice.call(arguments,1);o.splice(0,0,w,null);return l.triggerCustom.apply(this,o)};l.unbind=function(w,o){if(typeof w==="undefined")l.obsHandlers={};else for(var m=x(l,w),t=0;m&&t<m.length;t++)if(m[t].id===o){m.splice(t,1);break}return l}}return l}})();
(function(){var x=1.70158,I=Math.PI/2,l=1E3/60|0,w=Math.abs,o=Math.pow,m=Math.sin,t=Math.asin,D=Math.cos,F={linear:function(a,g,d,h){return d*a/h+g},backin:function(a,g,d,h){return d*(a/=h)*a*((x+1)*a-x)+g},backout:function(a,g,d,h){return d*((a=a/h-1)*a*((x+1)*a+x)+1)+g},backinout:function(a,g,d,h){return(a/=h/2)<1?d/2*a*a*(((x*=1.525)+1)*a-x)+g:d/2*((a-=2)*a*(((x*=1.525)+1)*a+x)+2)+g},bouncein:function(a,g,d,h){return d-F.bounceout(h-a,0,d,h)+g},bounceout:function(a,g,d,h){return(a/=h)<1/2.75?d*
7.5625*a*a+g:a<2/2.75?d*(7.5625*(a-=1.5/2.75)*a+0.75)+g:a<2.5/2.75?d*(7.5625*(a-=2.25/2.75)*a+0.9375)+g:d*(7.5625*(a-=2.625/2.75)*a+0.984375)+g},bounceinout:function(a,g,d,h){return a<h/2?F.bouncein(a*2,0,d,h)/2+g:F.bounceout(a*2-h,0,d,h)/2+d/2+g},cubicin:function(a,g,d,h){return d*(a/=h)*a*a+g},cubicout:function(a,g,d,h){return d*((a=a/h-1)*a*a+1)+g},cubicinout:function(a,g,d,h){if((a/=h/2)<1)return d/2*a*a*a+g;return d/2*((a-=2)*a*a+2)+g},elasticin:function(a,g,d,h,c,b){if(a==0)return g;if((a/=
h)==1)return g+d;b||(b=h*0.3);if(!c||c<w(d)){c=d;d=b/4}else d=b/TWO_PI*t(d/c);return-(c*o(2,10*(a-=1))*m((a*h-d)*TWO_PI/b))+g},elasticout:function(a,g,d,h,c,b){var e;if(a==0)return g;if((a/=h)==1)return g+d;b||(b=h*0.3);if(!c||c<w(d)){c=d;e=b/4}else e=b/TWO_PI*t(d/c);return c*o(2,-10*a)*m((a*h-e)*TWO_PI/b)+d+g},elasticinout:function(a,g,d,h,c,b){var e;if(a==0)return g;if((a/=h/2)==2)return g+d;b||(b=h*0.3*1.5);if(!c||c<w(d)){c=d;e=b/4}else e=b/TWO_PI*t(d/c);if(a<1)return-0.5*c*o(2,10*(a-=1))*m((a*
h-e)*TWO_PI/b)+g;return c*o(2,-10*(a-=1))*m((a*h-e)*TWO_PI/b)*0.5+d+g},quadin:function(a,g,d,h){return d*(a/=h)*a+g},quadout:function(a,g,d,h){return-d*(a/=h)*(a-2)+g},quadinout:function(a,g,d,h){if((a/=h/2)<1)return d/2*a*a+g;return-d/2*(--a*(a-2)-1)+g},sinein:function(a,g,d,h){return-d*D(a/h*I)+d+g},sineout:function(a,g,d,h){return d*m(a/h*I)+g},sineinout:function(a,g,d,h){return-d/2*(D(Math.PI*a/h)-1)+g}};COG.tweenValue=function(a,g,d,h,c){function b(q){q=q?q:(new Date).getTime();if(B+l<q){var C=
q-e,r=d(C,a,u,h),G=e+h<=q;q=!G;if(c){C=c(r,G,C);q=typeof C!="undefined"?C&&q:q}q&&animFrame(b)}}var e=(new Date).getTime(),B=0,u=g-a;animFrame(b);return{}};COG.easing=function(a){return F[a.replace(/[\-\_\s\.]/g,"").toLowerCase()]};COG.registerEasingType=function(a,g){F[a.replace(/[\-\_\s\.]/g,"").toLowerCase()]=g}})();
(function(){function x(m){return typeof console!=="undefined"?function(){console[m](Array.prototype.slice.call(arguments,0).join(" "));return true}:function(){return false}}var I=window.console&&window.console.markTimeline,l=x("error"),w=x("info"),o=function(){return I?function(m,t){console.markTimeline(m+(t?": "+((new Date).getTime()-t)+"ms":""))}:function(){}}();COG.extend(COG,{trace:o,debug:x("debug"),info:w,warn:x("warn"),error:l,exception:function(m){if(l)for(var t in m)w("ERROR DETAIL: "+t+
": "+m[t])}})})();
INTERACT=function(){function x(c){return function(b,e,B){(B?B:c?document.body:document).addEventListener(b,e,false)}}function I(c){return function(b,e,B){(B?B:c?document.body:document).removeEventListener(b,e,false)}}function l(c,b,e){(e?e:document).attachEvent("on"+c,b)}function w(c,b,e){(e?e:document).detachEvent("on"+c,b)}function o(c,b){return{x:c?c:0,y:b?b:0,count:1}}function m(c,b){d.push(COG.extend({handler:null,checks:{},type:c},b))}function t(c){var b=0,e=0;if(c.offsetParent){do{b+=c.offsetLeft;
e+=c.offsetTop;c=c.offsetParent}while(c)}return{left:b,top:e}}function D(c,b){return{source:c,target:b.target?b.target:b.srcElement}}function F(c,b){for(var e=c.target?c.target:c.srcElement;e&&e!==b&&e.nodeName&&e.nodeName.toUpperCase()!="CANVAS";)e=e.parentNode;return e&&e===b}function a(c,b){return{x:c.x-(b?b.left:0),y:c.y-(b?b.top:0)}}function g(c){if(c.preventDefault){c.preventDefault();c.stopPropagation()}else c.cancelBubble&&c.cancelBubble()}var d=[],h=function(c,b,e){function B(v,z,A,k){var p=
0,E=0,f=0;COG.tweenValue(0,v,A,k,function(j){f=p;p=j});COG.tweenValue(0,z,A,k,function(j){u.trigger("pan",p-f,j-E);E=j})}e=COG.extend({binder:null,unbinder:null,observable:null},e);for(var u=e.observable,q=null,C=[],r=[],G,H,J={bind:function(){return u.bind.apply(null,arguments)},pannable:function(v){q=COG.extend({inertia:true},v);return J},unbind:function(){u.unbind();for(var v=0;v<C.length;v++)C[v].unbind();return J}},O=0;O<b.length;O++)C.push(b[O](c,u,e));u.bind("pointerDown",function(){r=[];H=
G=0});u.bind("pointerMove",function(v,z,A,k){if(q){r[r.length]={ticks:(new Date).getTime(),x:k.x,y:k.y};u.trigger("pan",k.x,k.y)}G+=k.x?k.x:0;H+=k.y?k.y:0});u.bind("pointerUp",function(v,z,A){if(Math.abs(G)>20||Math.abs(H)>20){if(q){A=r.length;var k,p;z=0;for(p=r.length;--p>1&&z<50;)z+=r[p].ticks-r[p-1].ticks;if(A-p>1){v=r[A-1].x-r[p].x;k=r[A-1].y-r[p].y;p=Math.sqrt(v*v+k*k)|0;if(p>15){v=r[A-1].x-r[0].x;k=r[A-1].y-r[0].y;p=Math.sqrt(v*v+k*k)|0;A=Math.asin(k/p);z=p*500/z|0;z=z>300?300:z;B(Math.cos(v>
0?A:Math.PI-A)*z,Math.sin(A)*z,COG.easing("sine.out"),500)}}}}else u.trigger("tap",z,A)});return J};m("pointer",{handler:function(c,b,e){function B(f){if(f.pageX&&f.pageY)return o(f.pageX,f.pageY);else{var j=document.documentElement,y=document.body;return o(f.clientX+(j&&j.scrollLeft||y&&y.scrollLeft||0)-(j&&j.clientLeft||y&&y.clientLeft||0),f.clientY+(j&&j.scrollTop||y&&y.scrollTop||0)-(j&&j.clientTop||y&&y.clientTop||0))}}function u(f){if(F(f,c))if(v=G(f)){var j=B(f);c.style.cursor="move";g(f);
p=j.x;E=j.y;z=o(p,E);b.triggerCustom("pointerDown",D("mouse",f),z,a(z,t(c)))}}function q(f){var j=B(f);A=j.x;k=j.y;if(F(f,c))H(f,v?"pointerMove":"pointerHover")}function C(f){if(v&&G(f)){v=false;if(F(f,c)){c.style.cursor="default";H(f,"pointerUp")}}}function r(f){if(F(f,c)){var j;f=f||window.event;if(f.detail)j=f.axis===2?-f.detail*J:0;else{j=f.wheelDeltaY?f.wheelDeltaY:f.wheelDelta;if(window.opera)j=-j}if(j!==0){var y=o(A,k);b.triggerCustom("zoom",D("mouse",f),y,a(y,t(c)),j/O,"wheel");g(f);f.returnValue=
false}}}function G(f){f=f||window.event;return(f.which||f.button)==1}function H(f,j,y,L,P){y=typeof y!="undefined"?y:A;L=typeof L!="undefined"?L:k;var i=y-p,s=L-E,n=o(y,L);b.triggerCustom(j,D("mouse",f),n,a(n,t(c)),o(i,s));if(typeof P=="undefined"||P){p=y;E=L}}e=COG.extend({},e);var J=120,O=J*8,v=false,z,A,k,p,E;e.binder("mousedown",u,false);e.binder("mousemove",q,false);e.binder("mouseup",C,false);e.binder("dblclick",function(f){COG.info("captured double click");if(F(f,c)){var j=B(f);b.triggerCustom("doubleTap",
D("mouse",f),j,a(j,t(c)))}},false);e.binder("mousewheel",r,document);e.binder("DOMMouseScroll",r,document);return{unbind:function(){e.unbinder("mousedown",u,false);e.unbinder("mousemove",q,false);e.unbinder("mouseup",C,false);e.unbinder("mousewheel",r,document);e.unbinder("DOMMouseScroll",r,document)}}},checks:{touch:false}});m("pointer",{handler:function(c,b,e){function B(i){if(i.count<2)return 0;var s=i.x-i.next.x;i=i.y-i.next.y;return~~Math.sqrt(s*s+i*i)}function u(i,s,n){s=s?s:0;n=n?n:0;for(var K=
{x:i.x-s,y:i.y-n,id:i.id,count:i.count},M=K;i.next;){i=i.next;M=M.next={x:i.x-s,y:i.y-n,id:i.id}}return K}function q(i,s){var n=i[s?s:"touches"],K,M;if(n.length===0)return null;M=K={x:n[0].pageX,y:n[0].pageY,id:n[0].identifier,count:n.length};for(var N=1,Q=n.length;N<Q;N++)M=M.next={x:n[N].pageX,y:n[N].pageY,id:n[N].identifier};return K}function C(i){if(F(i,c)){k=t(c);var s=q(i,"changedTouches"),n=u(s,k.left,k.top);if(!E){p=v;b.triggerCustom("pointerDown",D("touch",i),s,n)}L&&b.triggerCustom("pointerDownMulti",
D("touch",i),s,n);E=q(i);if(E.count>1)j=B(E);P=1;y=u(E)}}function r(i){if(F(i,c)){i.preventDefault();f=q(i);if(p==v)p=Math.abs(E.x-f.x)>J||Math.abs(E.y-f.y)>J?O:v;if(p!=v){p=f.count>1?A:z;if(p==A)if(E.count===1){E=u(f);j=B(E)}else{var s=B(f);if(Math.abs(j-s)<H)p=z;else{var n;n=f.x;var K=f.next.x,M=f.y,N=f.next.y;n={x:(n<K?n:K)+(Math.abs(n-K)>>1),y:(M<N?M:N)+(Math.abs(M-N)>>1)};s=s/j;K=s-P;b.triggerCustom("zoom",D("touch",i),n,a(n,k),K,"pinch");P=s}}p==z&&b.triggerCustom("pointerMove",D("touch",i),
f,u(f,k.left,k.top),o(f.x-y.x,f.y-y.y));L&&b.triggerCustom("pointerMoveMulti",D("touch",i),f,u(f,k.left,k.top))}y=u(f)}}function G(i){if(F(i,c)){var s=q(i,"changedTouches"),n=u(s,k.left,k.top);f=q(i);if(!f){b.triggerCustom("pointerUp",D("touch",i),s,n);E=null}L&&b.triggerCustom("pointerUpMulti",D("touch",i),s,n)}}e=COG.extend({detailed:false,inertia:false},e);var H=20,J=7,O=0,v=1,z=2,A=3,k,p,E,f,j,y,L=e.detailed,P=1;e.binder("touchstart",C,false);e.binder("touchmove",r,false);e.binder("touchend",
G,false);COG.info("initialized touch handler");return{unbind:function(){e.unbinder("touchstart",C,false);e.unbinder("touchmove",r,false);e.unbinder("touchend",G,false)}}},checks:{touch:true}});return{register:m,watch:function(c,b,e){b=COG.extend({bindToBody:false,observable:null,isIE:typeof window.attachEvent!="undefined",types:null},b);capabilities=COG.extend({touch:"ontouchstart"in window},e);if(!b.observable){COG.info("creating observable");b.observable=COG.observable({});globalOpts=b}b.binder=
b.isIE?l:x(b.bindToBody);b.unbinder=b.isIE?w:I(b.bindToBody);e=b.types;for(var B=capabilities,u=[],q=d.length;q--;){var C=d[q],r=!e||e.indexOf(C.type)>=0,G=true,H;for(H in C.checks){var J=C.checks[H];COG.info("checking "+H+" capability. require: "+J+", capability = "+B[H]);G=G&&J===B[H]}if(r&&G)u[u.length]=C.handler}return new h(c,u,b)}}}();
