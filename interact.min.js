COG=typeof COG!=="undefined"?COG:{};COG.extend=function(){for(var u=arguments[0]||{},C,k=1,s=arguments.length;k<s;k++)if((C=arguments[k])!==null)for(var r in C){var i=C[r];if(u!==i)if(i!==undefined)u[r]=i}return u};
(function(){function u(k,s){var r=k.obsHandlers;r[s]||(r[s]=[]);return r[s]}var C=0;COG.observable=function(k){if(!k)return null;if(!k.obsHandlers)k.obsHandlers={};if(!(k.bind||k.trigger||k.unbind)){k.bind=function(s,r){var i="callback"+C++;u(k,s).unshift({fn:r,id:i});return i};k.trigger=function(s){var r=u(k,s),i={cancel:false,name:s},q;if(!r)return null;q=Array.prototype.slice.call(arguments,1);k.eventInterceptor&&k.eventInterceptor(s,i,q);q.unshift(i);for(var n=r.length;n--&&!i.cancel;)r[n].fn.apply(self,
q);return i};k.unbind=function(s,r){if(typeof s==="undefined")k.obsHandlers={};else for(var i=u(k,s),q=0;i&&q<i.length;q++)if(i[q].id===r){i.splice(q,1);break}return k}}return k}})();
var FNS_TIME=["webkitAnimationTime","mozAnimationTime","animationTime","webkitAnimationStartTime","mozAnimationStartTime","animationStartTime"],FNS_FRAME=["webkitRequestAnimationFrame","mozRequestAnimationFrame","requestAnimationFrame"],animTime=function(){return(new Date).getTime()},animFrame=function(u){setTimeout(function(){u(animTime())},1E3/60)};FNS_TIME.forEach(function(u){if(u in window)animTime=function(){return window[u]}});FNS_FRAME.forEach(function(u){if(u in window)animFrame=function(C){window[u](C)}});
COG.animTime=animTime;COG.animFrame=animFrame;
COG.Loopage=function(){function u(n){return COG.extend({id:r++,frequency:0,after:0,single:false,lastTick:0,execute:function(){}},n)}function C(n){q.push(n);s||(s=animFrame(k));recalcSleepFrequency=true}function k(){for(var n,x=animTime(),w=i.length;q.length>0;){var H=q.shift();for(n=w;n--;)if(i[n].id===H){i.splice(n,1);break}w=i.length}for(n=w;n--;){H=x-i[n].lastTick;if(i[n].lastTick===0||H>=i[n].frequency){i[n].execute(x,i[n]);i[n].lastTick=x;i[n].single&&i[n].trigger("complete")}}s=w?animFrame(k):
0}var s=0,r=0,i=[],q=[];return{join:function(n){var x=new u(n);if(x.after>0)x.lastTick=(new Date).getTime()+x.after;COG.observable(x);x.bind("complete",function(){C(x.id)});i.unshift(x);s||(s=animFrame(k));recalcSleepFrequency=true;return x},leave:C}}();
(function(){function u(a){if(L)return w.length;L=true;try{for(var b=0;b<w.length;)if(w[b].isComplete()){w[b].triggerComplete(false);w.splice(b,1)}else{w[b].update(a);b++}}finally{L=false}w.length===0&&H.trigger("complete");return w.length}function C(){if(!H){H=COG.Loopage.join({execute:u,frequency:20});H.bind("complete",function(){H=null})}}var k=1.70158,s=Math.PI/2,r=Math.abs,i=Math.pow,q=Math.sin,n=Math.asin,x=Math.cos,w=[],H=null,L=false,f={linear:function(a,b,c,d){return c*a/d+b},backin:function(a,
b,c,d){return c*(a/=d)*a*((k+1)*a-k)+b},backout:function(a,b,c,d){return c*((a=a/d-1)*a*((k+1)*a+k)+1)+b},backinout:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*(((k*=1.525)+1)*a-k)+b:c/2*((a-=2)*a*(((k*=1.525)+1)*a+k)+2)+b},bouncein:function(a,b,c,d){return c-f.bounceout(d-a,0,c,d)+b},bounceout:function(a,b,c,d){return(a/=d)<1/2.75?c*7.5625*a*a+b:a<2/2.75?c*(7.5625*(a-=1.5/2.75)*a+0.75)+b:a<2.5/2.75?c*(7.5625*(a-=2.25/2.75)*a+0.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+0.984375)+b},bounceinout:function(a,
b,c,d){return a<d/2?f.bouncein(a*2,0,c,d)/2+b:f.bounceout(a*2-d,0,c,d)/2+c/2+b},cubicin:function(a,b,c,d){return c*(a/=d)*a*a+b},cubicout:function(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b},cubicinout:function(a,b,c,d){if((a/=d/2)<1)return c/2*a*a*a+b;return c/2*((a-=2)*a*a+2)+b},elasticin:function(a,b,c,d,m,j){if(a==0)return b;if((a/=d)==1)return b+c;j||(j=d*0.3);if(!m||m<r(c)){m=c;c=j/4}else c=j/TWO_PI*n(c/m);return-(m*i(2,10*(a-=1))*q((a*d-c)*TWO_PI/j))+b},elasticout:function(a,b,c,d,m,j){var o;if(a==
0)return b;if((a/=d)==1)return b+c;j||(j=d*0.3);if(!m||m<r(c)){m=c;o=j/4}else o=j/TWO_PI*n(c/m);return m*i(2,-10*a)*q((a*d-o)*TWO_PI/j)+c+b},elasticinout:function(a,b,c,d,m,j){var o;if(a==0)return b;if((a/=d/2)==2)return b+c;j||(j=d*0.3*1.5);if(!m||m<r(c)){m=c;o=j/4}else o=j/TWO_PI*n(c/m);if(a<1)return-0.5*m*i(2,10*(a-=1))*q((a*d-o)*TWO_PI/j)+b;return m*i(2,-10*(a-=1))*q((a*d-o)*TWO_PI/j)*0.5+c+b},quadin:function(a,b,c,d){return c*(a/=d)*a+b},quadout:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},quadinout:function(a,
b,c,d){if((a/=d/2)<1)return c/2*a*a+b;return-c/2*(--a*(a-2)-1)+b},sinein:function(a,b,c,d){return-c*x(a/d*s)+c+b},sineout:function(a,b,c,d){return c*q(a/d*s)+b},sineinout:function(a,b,c,d){return-c/2*(x(Math.PI*a/d)-1)+b}},h=COG.Tween=function(a){a=COG.extend({target:null,property:null,startValue:0,endValue:null,duration:2E3,tweenFn:g("sine.out"),complete:null},a);var b=(new Date).getTime(),c=[],d=false,m=0,j=0;m=a.target&&a.property&&a.target[a.property]?a.target[a.property]:a.startValue;if(typeof a.endValue!==
"undefined")j=a.endValue-m;if(j==0)d=true;C();return{isComplete:function(){return d},triggerComplete:function(o){a.complete&&a.complete(o)},update:function(o){var B=a.tweenFn(o-b,m,j,a.duration);if(a.target)a.target[a.property]=B;for(var v=c.length;v--;)c[v](B,void 0);if(d=b+a.duration<=o){if(a.target)a.target[a.property]=a.tweenFn(a.duration,m,j,a.duration);for(o=c.length;o--;)c[o](B,true)}},requestUpdates:function(o){c.push(o)}}};COG.tweenValue=function(a,b,c,d,m){function j(v){var y=v-o,I=c(y,
a,B,d),z=o+d<=v;v=!z;if(m){y=m(I,z,y);v=typeof y!="undefined"?y&&v:v}v&&animFrame(j)}var o=animTime(),B=b-a;animFrame(j);return{}};COG.tween=function(a,b,c,d,m,j){a=new h({target:a,property:b,endValue:c,tweenFn:d,duration:j,complete:m});w.push(a);return a};COG.endTweens=function(a){if(!L){L=true;try{for(var b=0;b<w.length;)if(!a||a(w[b])){w[b].triggerComplete(true);w.splice(b,1)}else b++}finally{L=false}}};COG.getTweens=function(){return[].concat(w)};var g=COG.easing=function(a){return f[a.replace(/[\-\_\s\.]/g,
"").toLowerCase()]};COG.registerEasingType=function(a,b){f[a.replace(/[\-\_\s\.]/g,"").toLowerCase()]=b}})();
(function(){function u(i){return typeof console!=="undefined"?function(){console[i](Array.prototype.slice.call(arguments,0).join(" "));return true}:function(){return false}}var C=window.console&&window.console.markTimeline,k=u("error"),s=u("info"),r=function(){return C?function(i,q){console.markTimeline(i+(q?": "+((new Date).getTime()-q)+"ms":""))}:function(){}}();COG.extend(COG,{trace:r,debug:u("debug"),info:s,warn:u("warn"),error:k,exception:function(i){if(k)for(var q in i)s("ERROR DETAIL: "+q+
": "+i[q])}})})();
INTERACT=function(){function u(f){return function(h,g,a){(a?a:f?document.body:document).addEventListener(h,g,false)}}function C(f){return function(h,g,a){(a?a:f?document.body:document).removeEventListener(h,g,false)}}function k(f,h,g){(g?g:document).attachEvent("on"+f,h)}function s(f,h,g){(g?g:document).detachEvent("on"+f,h)}function r(f,h){return{x:f?f:0,y:h?h:0,count:1}}function i(f,h){H.push(COG.extend({handler:null,checks:{},type:f},h))}function q(f){var h=0,g=0;if(f.offsetParent){do{h+=f.offsetLeft;
g+=f.offsetTop;f=f.offsetParent}while(f)}return{x:h,y:g}}function n(f,h){for(var g=f.target?f.target:f.srcElement;g&&g.nodeName&&g.nodeName.toUpperCase()!="CANVAS";)g=g.parentNode;return g&&g===h}function x(f,h){return{x:f.x-(h?h.x:0),y:f.y-(h?h.y:0)}}function w(f){if(f.preventDefault){f.preventDefault();f.stopPropagation()}else f.cancelBubble&&f.cancelBubble()}var H=[],L=function(f,h,g){g=COG.extend({binder:null,unbinder:null,observable:null},g);for(var a=g.observable,b=null,c=[],d=[],m,j,o={bind:function(){return a.bind.apply(null,
arguments)},pannable:function(v){b=COG.extend({inertia:true},v);return o},unbind:function(){a.unbind();for(var v=0;v<c.length;v++)c[v].unbind();return o}},B=0;B<h.length;B++)c.push(h[B](f,a,g));a.bind("pointerDown",function(){COG.info("reset "+d.length+" pan history");d=[];j=m=0});a.bind("pointerMove",function(v,y,I,z){if(b){d[d.length]={ticks:(new Date).getTime(),x:z.x,y:z.y};a.trigger("pan",z.x,z.y)}m+=z.x?z.x:0;j+=z.y?z.y:0});a.bind("pointerUp",function(v,y,I){Math.abs(m)>20||Math.abs(j)>20||a.trigger("tap",
y,I)});return o};i("pointer",{handler:function(f,h,g){function a(e){if(n(e,f))if(v=m(e)){f.style.cursor="move";w(e);E=e.pageX?e.pageX:e.screenX;D=e.pageY?e.pageY:e.screenY;y=r(E,D);I=q(f);h.trigger("pointerDown",y,x(y,I))}}function b(e){z=e.pageX?e.pageX:e.screenX;F=e.pageY?e.pageY:e.screenY;if(n(e,f))j(v?"pointerMove":"pointerHover")}function c(e){if(v&&m(e)){v=false;if(n(e,f)){f.style.cursor="default";j("pointerUp")}}}function d(e){if(n(e,f)){var A;e=e||window.event;if(e.detail)A=e.axis===2?-e.detail*
o:0;else{A=e.wheelDeltaY?e.wheelDeltaY:e.wheelDelta;if(window.opera)A=-A}if(A!==0){var G=r(z,F);h.trigger("zoom",G,x(G,q(f)),A/B,"wheel");w(e);e.returnValue=false}}}function m(e){e=e||window.event;return(e.which||e.button)==1}function j(e,A,G,M){A=typeof A!="undefined"?A:z;G=typeof G!="undefined"?G:F;var N=A-E,l=G-D,p=r(A,G);h.trigger(e,p,x(p,I),r(N,l));if(typeof M=="undefined"||M){E=A;D=G}}g=COG.extend({},g);var o=120,B=o*8,v=false,y,I,z,F,E,D;g.binder("mousedown",a,false);g.binder("mousemove",b,
false);g.binder("mouseup",c,false);g.binder("dblclick",function(e){COG.info("captured double click");if(n(e,f)){e=r(e.pageX?e.pageX:e.screenX,e.pageY?e.pageY:e.screenY);COG.info("captured double click + target matched");h.trigger("doubleTap",e,x(e,q(f)))}},false);g.binder("mousewheel",d,document);g.binder("DOMMouseScroll",d,document);return{unbind:function(){g.unbinder("mousedown",a,false);g.unbinder("mousemove",b,false);g.unbinder("mouseup",c,false);g.unbinder("mousewheel",d,document);g.unbinder("DOMMouseScroll",
d,document)}}},checks:{touch:false}});i("pointer",{handler:function(f,h,g){function a(l){if(l.count<2)return 0;var p=l.x-l.next.x;l=l.y-l.next.y;return~~Math.sqrt(p*p+l*l)}function b(l,p,t){p=p?p:0;t=t?t:0;for(var K={x:l.x-p,y:l.y-t,id:l.id,count:l.count},J=K;l.next;){l=l.next;J=J.next={x:l.x-p,y:l.y-t,id:l.id}}return K}function c(l,p){var t=l[p?p:"touches"],K,J;if(t.length===0)return null;J=K={x:t[0].pageX,y:t[0].pageY,id:t[0].identifier,count:t.length};for(var O=1,P=t.length;O<P;O++)J=J.next={x:t[O].pageX,
y:t[O].pageY,id:t[O].identifier};return K}function d(l){if(n(l,f)){F=q(f);var p=c(l,"changedTouches"),t=b(p,F.x,F.y);if(!D){E=y;h.trigger("pointerDown",p,t)}M&&h.trigger("pointerDownMulti",p,t);D=c(l);if(D.count>1)A=a(D);N=1;G=b(D)}}function m(l){if(n(l,f)){l.preventDefault();e=c(l);if(E==y)E=Math.abs(D.x-e.x)>B||Math.abs(D.y-e.y)>B?v:y;if(E!=y){E=e.count>1?z:I;if(E==z)if(D.count===1){D=b(e);A=a(D)}else{l=a(e);if(Math.abs(A-l)<o)E=I;else{var p;p=e.x;var t=e.next.x,K=e.y,J=e.next.y;p={x:(p<t?p:t)+
(Math.abs(p-t)>>1),y:(K<J?K:J)+(Math.abs(K-J)>>1)};l=l/A;t=l-N;h.trigger("zoom",p,x(p,F),t,"pinch");N=l}}E==I&&h.trigger("pointerMove",e,b(e,F.x,F.y),r(e.x-G.x,e.y-G.y));M&&h.trigger("pointerMoveMulti",e,b(e,F.x,F.y))}G=b(e)}}function j(l){if(n(l,f)){var p=c(l,"changedTouches"),t=b(p,F.x,F.y);e=c(l);if(!e){E===y&&h.trigger("pointerTap",p,t);h.trigger("pointerUp",p,t);D=null}M&&h.trigger("pointerUpMulti",p,t)}}g=COG.extend({detailed:false,inertia:false},g);var o=20,B=7,v=0,y=1,I=2,z=3,F,E,D,e,A,G,
M=g.detailed,N=1;g.binder("touchstart",d,false);g.binder("touchmove",m,false);g.binder("touchend",j,false);COG.info("initialized touch handler");return{unbind:function(){g.unbinder("touchstart",d,false);g.unbinder("touchmove",m,false);g.unbinder("touchend",j,false)}}},checks:{touch:true}});return{register:i,watch:function(f,h,g){h=COG.extend({bindToBody:false,observable:null,isIE:typeof window.attachEvent!="undefined",types:null},h);capabilities=COG.extend({touch:"ontouchstart"in window},g);if(!h.observable){COG.info("creating observable");
h.observable=COG.observable({});globalOpts=h}h.binder=h.isIE?k:u(h.bindToBody);h.unbinder=h.isIE?s:C(h.bindToBody);g=h.types;for(var a=capabilities,b=[],c=H.length;c--;){var d=H[c],m=!g||g.indexOf(d.type)>=0,j=true,o;for(o in d.checks){var B=d.checks[o];COG.info("checking "+o+" capability. require: "+B+", capability = "+a[o]);j=j&&B===a[o]}if(m&&j)b[b.length]=d.handler}return new L(f,b,h)}}}();
