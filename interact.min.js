COG=typeof COG!=="undefined"?COG:{};COG.extend=function(){for(var u=arguments[0]||{},z,j=1,r=arguments.length;j<r;j++)if((z=arguments[j])!==null)for(var p in z){var i=z[p];if(u!==i)if(i!==undefined)u[p]=i}return u};
(function(){function u(j,r){var p=j.obsHandlers;p[r]||(p[r]=[]);return p[r]}var z=0;COG.observable=function(j){if(!j)return null;if(!j.obsHandlers)j.obsHandlers={};if(!(j.bind||j.trigger||j.unbind)){j.bind=function(r,p){var i="callback"+z++;u(j,r).unshift({fn:p,id:i});return i};j.triggerCustom=function(r,p){var i=u(j,r),q={cancel:false,name:r},l;p&&COG.extend(q,p);if(!i)return null;l=Array.prototype.slice.call(arguments,2);j.eventInterceptor&&j.eventInterceptor(r,q,l);l.unshift(q);for(var t=i.length;t--&&
!q.cancel;)i[t].fn.apply(this,l);return q};j.trigger=function(r){var p=Array.prototype.slice.call(arguments,1);p.splice(0,0,r,null);return j.triggerCustom.apply(this,p)};j.unbind=function(r,p){if(typeof r==="undefined")j.obsHandlers={};else for(var i=u(j,r),q=0;i&&q<i.length;q++)if(i[q].id===p){i.splice(q,1);break}return j}}return j}})();
var FNS_TIME=["webkitAnimationTime","mozAnimationTime","animationTime","webkitAnimationStartTime","mozAnimationStartTime","animationStartTime"],FNS_FRAME=["webkitRequestAnimationFrame","mozRequestAnimationFrame","requestAnimationFrame"],animTime=function(){return(new Date).getTime()},animFrame=function(u){setTimeout(function(){u(animTime())},1E3/60)};FNS_TIME.forEach(function(u){if(u in window)animTime=function(){return window[u]}});FNS_FRAME.forEach(function(u){if(u in window)animFrame=function(z){window[u](z)}});
COG.animTime=animTime;COG.animFrame=animFrame;
COG.Loopage=function(){function u(l){return COG.extend({id:p++,frequency:0,after:0,single:false,lastTick:0,execute:function(){}},l)}function z(l){q.push(l);r||(r=animFrame(j));recalcSleepFrequency=true}function j(){for(var l,t=animTime(),v=i.length;q.length>0;){var I=q.shift();for(l=v;l--;)if(i[l].id===I){i.splice(l,1);break}v=i.length}for(l=v;l--;){I=t-i[l].lastTick;if(i[l].lastTick===0||I>=i[l].frequency){i[l].execute(t,i[l]);i[l].lastTick=t;i[l].single&&i[l].trigger("complete")}}r=v?animFrame(j):
0}var r=0,p=0,i=[],q=[];return{join:function(l){var t=new u(l);if(t.after>0)t.lastTick=(new Date).getTime()+t.after;COG.observable(t);t.bind("complete",function(){z(t.id)});i.unshift(t);r||(r=animFrame(j));recalcSleepFrequency=true;return t},leave:z}}();
(function(){function u(a){if(K)return v.length;K=true;try{for(var b=0;b<v.length;)if(v[b].isComplete()){v[b].triggerComplete(false);v.splice(b,1)}else{v[b].update(a);b++}}finally{K=false}v.length===0&&I.trigger("complete");return v.length}function z(){if(!I){I=COG.Loopage.join({execute:u,frequency:20});I.bind("complete",function(){I=null})}}var j=1.70158,r=Math.PI/2,p=Math.abs,i=Math.pow,q=Math.sin,l=Math.asin,t=Math.cos,v=[],I=null,K=false,O={linear:function(a,b,c,d){return c*a/d+b},backin:function(a,
b,c,d){return c*(a/=d)*a*((j+1)*a-j)+b},backout:function(a,b,c,d){return c*((a=a/d-1)*a*((j+1)*a+j)+1)+b},backinout:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*(((j*=1.525)+1)*a-j)+b:c/2*((a-=2)*a*(((j*=1.525)+1)*a+j)+2)+b},bouncein:function(a,b,c,d){return c-O.bounceout(d-a,0,c,d)+b},bounceout:function(a,b,c,d){return(a/=d)<1/2.75?c*7.5625*a*a+b:a<2/2.75?c*(7.5625*(a-=1.5/2.75)*a+0.75)+b:a<2.5/2.75?c*(7.5625*(a-=2.25/2.75)*a+0.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+0.984375)+b},bounceinout:function(a,
b,c,d){return a<d/2?O.bouncein(a*2,0,c,d)/2+b:O.bounceout(a*2-d,0,c,d)/2+c/2+b},cubicin:function(a,b,c,d){return c*(a/=d)*a*a+b},cubicout:function(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b},cubicinout:function(a,b,c,d){if((a/=d/2)<1)return c/2*a*a*a+b;return c/2*((a-=2)*a*a+2)+b},elasticin:function(a,b,c,d,h,m){if(a==0)return b;if((a/=d)==1)return b+c;m||(m=d*0.3);if(!h||h<p(c)){h=c;c=m/4}else c=m/TWO_PI*l(c/h);return-(h*i(2,10*(a-=1))*q((a*d-c)*TWO_PI/m))+b},elasticout:function(a,b,c,d,h,m){var n;if(a==
0)return b;if((a/=d)==1)return b+c;m||(m=d*0.3);if(!h||h<p(c)){h=c;n=m/4}else n=m/TWO_PI*l(c/h);return h*i(2,-10*a)*q((a*d-n)*TWO_PI/m)+c+b},elasticinout:function(a,b,c,d,h,m){var n;if(a==0)return b;if((a/=d/2)==2)return b+c;m||(m=d*0.3*1.5);if(!h||h<p(c)){h=c;n=m/4}else n=m/TWO_PI*l(c/h);if(a<1)return-0.5*h*i(2,10*(a-=1))*q((a*d-n)*TWO_PI/m)+b;return h*i(2,-10*(a-=1))*q((a*d-n)*TWO_PI/m)*0.5+c+b},quadin:function(a,b,c,d){return c*(a/=d)*a+b},quadout:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},quadinout:function(a,
b,c,d){if((a/=d/2)<1)return c/2*a*a+b;return-c/2*(--a*(a-2)-1)+b},sinein:function(a,b,c,d){return-c*t(a/d*r)+c+b},sineout:function(a,b,c,d){return c*q(a/d*r)+b},sineinout:function(a,b,c,d){return-c/2*(t(Math.PI*a/d)-1)+b}},g=COG.Tween=function(a){a=COG.extend({target:null,property:null,startValue:0,endValue:null,duration:2E3,tweenFn:f("sine.out"),complete:null},a);var b=(new Date).getTime(),c=[],d=false,h=0,m=0;h=a.target&&a.property&&a.target[a.property]?a.target[a.property]:a.startValue;if(typeof a.endValue!==
"undefined")m=a.endValue-h;if(m==0)d=true;z();return{isComplete:function(){return d},triggerComplete:function(n){a.complete&&a.complete(n)},update:function(n){var x=a.tweenFn(n-b,h,m,a.duration);if(a.target)a.target[a.property]=x;for(var w=c.length;w--;)c[w](x,void 0);if(d=b+a.duration<=n){if(a.target)a.target[a.property]=a.tweenFn(a.duration,h,m,a.duration);for(n=c.length;n--;)c[n](x,true)}},requestUpdates:function(n){c.push(n)}}};COG.tweenValue=function(a,b,c,d,h){function m(w){var y=w-n,D=c(y,
a,x,d),H=n+d<=w;w=!H;if(h){y=h(D,H,y);w=typeof y!="undefined"?y&&w:w}w&&animFrame(m)}var n=animTime(),x=b-a;animFrame(m);return{}};COG.tween=function(a,b,c,d,h,m){a=new g({target:a,property:b,endValue:c,tweenFn:d,duration:m,complete:h});v.push(a);return a};COG.endTweens=function(a){if(!K){K=true;try{for(var b=0;b<v.length;)if(!a||a(v[b])){v[b].triggerComplete(true);v.splice(b,1)}else b++}finally{K=false}}};COG.getTweens=function(){return[].concat(v)};var f=COG.easing=function(a){return O[a.replace(/[\-\_\s\.]/g,
"").toLowerCase()]};COG.registerEasingType=function(a,b){O[a.replace(/[\-\_\s\.]/g,"").toLowerCase()]=b}})();
(function(){function u(i){return typeof console!=="undefined"?function(){console[i](Array.prototype.slice.call(arguments,0).join(" "));return true}:function(){return false}}var z=window.console&&window.console.markTimeline,j=u("error"),r=u("info"),p=function(){return z?function(i,q){console.markTimeline(i+(q?": "+((new Date).getTime()-q)+"ms":""))}:function(){}}();COG.extend(COG,{trace:p,debug:u("debug"),info:r,warn:u("warn"),error:j,exception:function(i){if(j)for(var q in i)r("ERROR DETAIL: "+q+
": "+i[q])}})})();
INTERACT=function(){function u(g){return function(f,a,b){(b?b:g?document.body:document).addEventListener(f,a,false)}}function z(g){return function(f,a,b){(b?b:g?document.body:document).removeEventListener(f,a,false)}}function j(g,f,a){(a?a:document).attachEvent("on"+g,f)}function r(g,f,a){(a?a:document).detachEvent("on"+g,f)}function p(g,f){return{x:g?g:0,y:f?f:0,count:1}}function i(g,f){K.push(COG.extend({handler:null,checks:{},type:g},f))}function q(g){var f=0,a=0;if(g.offsetParent){do{f+=g.offsetLeft;
a+=g.offsetTop;g=g.offsetParent}while(g)}return{x:f,y:a}}function l(g,f){return{source:g,target:f.target?f.target:f.srcElement}}function t(g,f){for(var a=g.target?g.target:g.srcElement;a&&a!==f&&a.nodeName&&a.nodeName.toUpperCase()!="CANVAS";)a=a.parentNode;return a&&a===f}function v(g,f){return{x:g.x-(f?f.x:0),y:g.y-(f?f.y:0)}}function I(g){if(g.preventDefault){g.preventDefault();g.stopPropagation()}else g.cancelBubble&&g.cancelBubble()}var K=[],O=function(g,f,a){a=COG.extend({binder:null,unbinder:null,
observable:null},a);for(var b=a.observable,c=null,d=[],h=[],m,n,x={bind:function(){return b.bind.apply(null,arguments)},pannable:function(y){c=COG.extend({inertia:true},y);return x},unbind:function(){b.unbind();for(var y=0;y<d.length;y++)d[y].unbind();return x}},w=0;w<f.length;w++)d.push(f[w](g,b,a));b.bind("pointerDown",function(){COG.info("reset "+h.length+" pan history");h=[];n=m=0});b.bind("pointerMove",function(y,D,H,C){if(c){h[h.length]={ticks:(new Date).getTime(),x:C.x,y:C.y};b.trigger("pan",
C.x,C.y)}m+=C.x?C.x:0;n+=C.y?C.y:0});b.bind("pointerUp",function(y,D,H){Math.abs(m)>20||Math.abs(n)>20||b.trigger("tap",D,H)});return x};i("pointer",{handler:function(g,f,a){function b(e){if(t(e,g))if(y=m(e)){g.style.cursor="move";I(e);E=e.pageX?e.pageX:e.screenX;A=e.pageY?e.pageY:e.screenY;D=p(E,A);H=q(g);f.triggerCustom("pointerDown",l("mouse",e),D,v(D,H))}}function c(e){C=e.pageX?e.pageX:e.screenX;F=e.pageY?e.pageY:e.screenY;if(t(e,g))n(e,y?"pointerMove":"pointerHover")}function d(e){if(y&&m(e)){y=
false;if(t(e,g)){g.style.cursor="default";n(e,"pointerUp")}}}function h(e){if(t(e,g)){var B;e=e||window.event;if(e.detail)B=e.axis===2?-e.detail*x:0;else{B=e.wheelDeltaY?e.wheelDeltaY:e.wheelDelta;if(window.opera)B=-B}if(B!==0){var G=p(C,F);f.triggerCustom("zoom",l("mouse",e),G,v(G,q(g)),B/w,"wheel");I(e);e.returnValue=false}}}function m(e){e=e||window.event;return(e.which||e.button)==1}function n(e,B,G,L,P){G=typeof G!="undefined"?G:C;L=typeof L!="undefined"?L:F;var k=G-E,s=L-A,o=p(G,L);f.triggerCustom(B,
l("mouse",e),o,v(o,H),p(k,s));if(typeof P=="undefined"||P){E=G;A=L}}a=COG.extend({},a);var x=120,w=x*8,y=false,D,H,C,F,E,A;a.binder("mousedown",b,false);a.binder("mousemove",c,false);a.binder("mouseup",d,false);a.binder("dblclick",function(e){COG.info("captured double click");if(t(e,g)){var B=p(e.pageX?e.pageX:e.screenX,e.pageY?e.pageY:e.screenY);COG.info("captured double click + target matched");f.triggerCustom("doubleTap",l("mouse",e),B,v(B,q(g)))}},false);a.binder("mousewheel",h,document);a.binder("DOMMouseScroll",
h,document);return{unbind:function(){a.unbinder("mousedown",b,false);a.unbinder("mousemove",c,false);a.unbinder("mouseup",d,false);a.unbinder("mousewheel",h,document);a.unbinder("DOMMouseScroll",h,document)}}},checks:{touch:false}});i("pointer",{handler:function(g,f,a){function b(k){if(k.count<2)return 0;var s=k.x-k.next.x;k=k.y-k.next.y;return~~Math.sqrt(s*s+k*k)}function c(k,s,o){s=s?s:0;o=o?o:0;for(var J={x:k.x-s,y:k.y-o,id:k.id,count:k.count},M=J;k.next;){k=k.next;M=M.next={x:k.x-s,y:k.y-o,id:k.id}}return J}
function d(k,s){var o=k[s?s:"touches"],J,M;if(o.length===0)return null;M=J={x:o[0].pageX,y:o[0].pageY,id:o[0].identifier,count:o.length};for(var N=1,Q=o.length;N<Q;N++)M=M.next={x:o[N].pageX,y:o[N].pageY,id:o[N].identifier};return J}function h(k){if(t(k,g)){F=q(g);var s=d(k,"changedTouches"),o=c(s,F.x,F.y);if(!A){E=D;f.triggerCustom("pointerDown",l("touch",k),s,o)}L&&f.triggerCustom("pointerDownMulti",l("touch",k),s,o);A=d(k);if(A.count>1)B=b(A);P=1;G=c(A)}}function m(k){if(t(k,g)){k.preventDefault();
e=d(k);if(E==D)E=Math.abs(A.x-e.x)>w||Math.abs(A.y-e.y)>w?y:D;if(E!=D){E=e.count>1?C:H;if(E==C)if(A.count===1){A=c(e);B=b(A)}else{var s=b(e);if(Math.abs(B-s)<x)E=H;else{var o;o=e.x;var J=e.next.x,M=e.y,N=e.next.y;o={x:(o<J?o:J)+(Math.abs(o-J)>>1),y:(M<N?M:N)+(Math.abs(M-N)>>1)};s=s/B;J=s-P;f.triggerCustom("zoom",l("touch",k),o,v(o,F),J,"pinch");P=s}}E==H&&f.triggerCustom("pointerMove",l("touch",k),e,c(e,F.x,F.y),p(e.x-G.x,e.y-G.y));L&&f.triggerCustom("pointerMoveMulti",l("touch",k),e,c(e,F.x,F.y))}G=
c(e)}}function n(k){if(t(k,g)){var s=d(k,"changedTouches"),o=c(s,F.x,F.y);e=d(k);if(!e){E===D&&f.triggerCustom("tap",l("touch",k),s,o);f.triggerCustom("pointerUp",l("touch",k),s,o);A=null}L&&f.triggerCustom("pointerUpMulti",l("touch",k),s,o)}}a=COG.extend({detailed:false,inertia:false},a);var x=20,w=7,y=0,D=1,H=2,C=3,F,E,A,e,B,G,L=a.detailed,P=1;a.binder("touchstart",h,false);a.binder("touchmove",m,false);a.binder("touchend",n,false);COG.info("initialized touch handler");return{unbind:function(){a.unbinder("touchstart",
h,false);a.unbinder("touchmove",m,false);a.unbinder("touchend",n,false)}}},checks:{touch:true}});return{register:i,watch:function(g,f,a){f=COG.extend({bindToBody:false,observable:null,isIE:typeof window.attachEvent!="undefined",types:null},f);capabilities=COG.extend({touch:"ontouchstart"in window},a);if(!f.observable){COG.info("creating observable");f.observable=COG.observable({});globalOpts=f}f.binder=f.isIE?j:u(f.bindToBody);f.unbinder=f.isIE?r:z(f.bindToBody);a=f.types;for(var b=capabilities,c=
[],d=K.length;d--;){var h=K[d],m=!a||a.indexOf(h.type)>=0,n=true,x;for(x in h.checks){var w=h.checks[x];COG.info("checking "+x+" capability. require: "+w+", capability = "+b[x]);n=n&&w===b[x]}if(m&&n)c[c.length]=h.handler}return new O(g,c,f)}}}();
